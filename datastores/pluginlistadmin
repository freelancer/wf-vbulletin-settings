{
  "admin_options_processing": "\r\n$vbpua_lasthook='admin_options_processing';\r\ninclude(DIR.'/includes/vbvua_hooks.php');\r\n             \r\nif ($oldsetting['varname'] == 'vbo_online')\r\n{\r\n\t$vbulletin->options['vbo_online'] = $settings[\"$oldsetting[varname]\"];\r\n}\r\n\r\nif ($oldsetting['varname'] == 'vbo_prefix' && trim($settings[\"$oldsetting[varname]\"]) != '')\r\n{\r\n\tif (!preg_match(\"#^[a-z_]+$#i\", $settings[\"$oldsetting[varname]\"]))\r\n\t{\r\n\t\tprint_cp_message('vB Optimise: You have specified an invalid data prefix, it may only contain a-z and underscore (_) characters.');\r\n\t}\r\n}\r\n\r\nif ($oldsetting['varname'] == 'vbo_operator' && $settings[\"$oldsetting[varname]\"] != 'none' && $vbulletin->options['vbo_online'])\r\n{\r\n\tvb_optimise::$cache = null;\r\n\tvb_optimise::assign($settings[\"$oldsetting[varname]\"]);\r\n\r\n\tif (!vb_optimise::$cache->connect())\r\n\t{\r\n\t\tprint_cp_message('vB Optimise: You have selected a cache method that vB Optimise has detected you cannot use, this may be because the extension required is either not installed or configured correctly on your server. Please contact your system administrator or hosting provider for more information.');\r\n\t}\r\n\r\n\tif ($settings[\"$oldsetting[varname]\"] == 'filecache' && !vb_optimise::$cache->canwrite())\r\n\t{\r\n\t\tprint_cp_message('vB Optimise: The filecache directory is not writeable. Please give the following directory correct permissions for filecache to work: <em>/vboptimise/filecache</em>');\r\n\t}\r\n}\r\nif (is_array($settings['bop5hic_groups']))\r\n{\r\n  $settings['bop5hic_groups'] = implode(',', $settings['bop5hic_groups']);\r\n}\r\n\r\nif (is_array($settings['bop5hic_nogroups']))\r\n{\r\n  $settings['bop5hic_nogroups'] = implode(',', $settings['bop5hic_nogroups']);\r\n}\r\n", 
  "can_administer": "$bits = array(\r\n\t'canblog' => 1,\r\n\t'canblogpermissions' => 2\r\n);\r\n\r\nforeach($do AS $field)\r\n{\r\n\tif (isset($bits[\"$field\"]) AND ($admin['blogpermissions'] & $bits[\"$field\"]))\r\n\t{\r\n\t\t$return_value = true;\r\n\t\tbreak;\r\n\t}\r\n}\r\n", 
  "admin_index_navigation": "\t\t\t\t\r\n\t\t\t\tif (can_administer_angadver())\r\n\t\t\t\t{\r\n\t\t\t\t\t$navigation[20][fetch_nav_text(array('text' => 'angular_advertisements'))] = array(\r\n\t\t\t\t\t\t'options' => array(\r\n\t\t\t\t\t\t\t10 => array(\r\n\t\t\t\t\t\t\t\t$tmp = fetch_nav_text(array('phrase' => 'settings')) => array(\r\n\t\t\t\t\t\t\t\t\t'displayorder' => 10,\r\n\t\t\t\t\t\t\t\t\t'phrase' => 'settings',\r\n\t\t\t\t\t\t\t\t\t'link' => 'options.php?do=options&dogroup=angular_advertisements',\r\n\t\t\t\t\t\t\t\t\t'text' => $tmp\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t20 => array(\r\n\t\t\t\t\t\t\t\t$tmp = fetch_nav_text(array('phrase' => 'angular_advertisements_manager')) => array(\r\n\t\t\t\t\t\t\t\t\t'displayorder' => 20,\r\n\t\t\t\t\t\t\t\t\t'phrase' => 'angular_advertisements_manager',\r\n\t\t\t\t\t\t\t\t\t'link' => 'angadver.php?do=modify',\r\n\t\t\t\t\t\t\t\t\t'text' => $tmp\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t30 => array(\r\n\t\t\t\t\t\t\t\t$tmp = fetch_nav_text(array('phrase' => 'angular_advertisements_add')) => array(\r\n\t\t\t\t\t\t\t\t\t'displayorder' => 30,\r\n\t\t\t\t\t\t\t\t\t'phrase' => 'angular_advertisements_add',\r\n\t\t\t\t\t\t\t\t\t'link' => 'angadver.php?do=add',\r\n\t\t\t\t\t\t\t\t\t'text' => $tmp\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t40 => array(\r\n\t\t\t\t\t\t\t\t$tmp = fetch_nav_text(array('phrase' => 'angular_advertisements_rebuild_cache')) => array(\r\n\t\t\t\t\t\t\t\t\t'displayorder' => 30,\r\n\t\t\t\t\t\t\t\t\t'phrase' => 'angular_advertisements_rebuild_cache',\r\n\t\t\t\t\t\t\t\t\t'link' => 'angadver.php?do=rebuildcache',\r\n\t\t\t\t\t\t\t\t\t'text' => $tmp\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t'group' => array(\r\n\t\t\t\t\t\t\t'phrase' => fetch_nav_text(array('text' => 'angular_advertisements')),\r\n\t\t\t\t\t\t\t'permissions' => canadminangularadver,\r\n\t\t\t\t\t\t\t'hr' => false,\r\n\t\t\t\t\t\t\t'displayorder' => 20,\r\n\t\t\t\t\t\t\t'nav_file' => angularadvertisements,\r\n\t\t\t\t\t\t\t'text' => fetch_nav_text(array('phrase' => 'angular_advertisements'))\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\r\n", 
  "template_groups": "$only['blog'] = $vbphrase['group_blog'];\r\n$only = array_merge($only, array('vbseo' => 'vBSEO'));\r\n$only['ap_groupmessage_'] = 'Ap Groups';\r\n$only['post_thanks'] = $vbphrase['post_thank_you_hack'];\r\n$only['cyb_'] = 'Cybernetec';\r\n\t\t\r\n$only['cyb_'] = 'Cybernetec';\r\n\t\t\r\n$only['cyb_'] = 'Cybernetec';\r\n\t\t\r\n$only['kh99_password'] = 'kh99 Password Policy';\r\n", 
  "admin_options_print": "\r\n$vbpua_lasthook='admin_options_print';\r\ninclude(DIR.'/includes/vbvua_hooks.php');\r\n             \r\n", 
  "admin_permissions_process": "\r\n\t\t\t\t$vbulletin->input->clean_array_gpc('p', array(\r\n\t\t\t\t\t\t'canadminangularadver' => TYPE_BOOL\r\n\t\t\t\t));\r\n\t\t\t\t$admindm->set('canadminangularadver', $vbulletin->GPC['canadminangularadver']);\r\n\t\t\t\r\n$vbulletin->input->clean_array_gpc('p', array(\r\n\t'blogpermissions' => TYPE_ARRAY_INT\r\n));\r\n\r\n$blogperms = 0;\r\nforeach ($vbulletin->GPC['blogpermissions'] AS $bit => $value)\r\n{\r\n\tif ($value)\r\n\t{\r\n\t\t$blogperms += $bit;\r\n\t}\r\n}\r\n\r\n$admindm->set('blogpermissions', $blogperms);\r\n", 
  "mod_index_navigation": "if (can_moderate(0, 'vbseo_linkbacks'))\r\n\t{\r\n\tconstruct_nav_option($vbphrase['vbseo_moderate_linkbacks'], 'vbseo_moderate.php?do=linkbacks');\r\n\tconstruct_nav_group($vbphrase['vbseo_linkbacks']);\r\n\tconstruct_nav_spacer();\r\n\t}\r\n", 
  "admin_complete": "if(defined('VBSEO_ENABLED'))\r\nvbseo_complete_sec('forumadmin_update_save');\r\n", 
  "admin_delete_confirmation": "\r\n\t\t\t\tif ($table == 'angularadvertisement')\r\n\t\t\t\t{\r\n\t\t\t\t\t$idfield = 'adverid'; \r\n\t\t\t\t}\r\n\t\t\t\r\nif ($table == 'blog_moderator')\r\n{\r\n\t$idfield = 'blogmoderatorid';\r\n\r\n\t$item = $vbulletin->db->query_first(\"\r\n\t\tSELECT blogmoderatorid, username\r\n\t\tFROM \" . TABLE_PREFIX . \"blog_moderator AS blog_moderator\r\n\t\tLEFT JOIN \" . TABLE_PREFIX . \"user AS user USING (userid)\r\n\t\tWHERE blogmoderatorid = $itemid\r\n\t\");\r\n\t$item['title'] = $item['username'];\r\n\t$handled = true;\r\n}\r\nelse if ($table == 'blog_featured')\r\n{\r\n\t$idfield = 'featureid';\r\n\r\n\t$item = $vbulletin->db->query_first(\"\r\n\t\tSELECT featureid\r\n\t\tFROM \" . TABLE_PREFIX . \"blog_featured\r\n\t\tWHERE featureid = $itemid\r\n\t\");\r\n\t$item['title'] = 'featureid';\r\n\t$handled = true;\r\n}\r\nelse if ($table == 'blog_category')\r\n{\r\n\t$idfield = 'blogcategoryid';\r\n\r\n\t$item = $vbulletin->db->query_first(\"\r\n\t\tSELECT blogcategoryid\r\n\t\tFROM \" . TABLE_PREFIX . \"blog_category\r\n\t\tWHERE blogcategoryid = $itemid AND userid = 0\r\n\t\");\r\n\t$item['title'] = 'blogcategoryid';\r\n\t$handled = true;\r\n}\r\n", 
  "admin_modlogviewer_query_linkfield": "if ($log['product'] == 'vbblog')\r\n{\r\n\t$handled = true;\r\n\tswitch($sqlfield)\r\n\t{\r\n\t\tcase 'blog_title':\r\n\t\t\t$celldata .= construct_link_code($log[\"$sqlfield\"], \"../blog.php?\" . $vbulletin->session->vars['sessionurl'] . \"u=$log[id1]\", true);\r\n\t\t\tbreak;\r\n\t\tcase 'blogentry_title':\r\n\t\t\t$celldata .= construct_link_code($log[\"$sqlfield\"], \"../blog.php?\" . $vbulletin->session->vars['sessionurl'] . \"b=$log[id2]\", true);\r\n\t\t\tbreak;\r\n\t\tcase 'comment_title':\r\n\t\t\t$celldata .= construct_link_code($log[\"$sqlfield\"], \"../blog.php?\" . $vbulletin->session->vars['sessionurl'] . \"b=$log[id2]#comment$log[id3]\", true);\r\n\t\t\tbreak;\r\n\t\tcase 'blogattachment_title':\r\n\t\t\t$celldata .= construct_link_code(htmlspecialchars_uni($log[\"$sqlfield\"]), \"../blog_attachment.php?\" . $vbulletin->session->vars['sessionurl'] . \"attachmentid=$log[id4]&amp;nocache=\" . vbrand(0,1000000), true);\r\n\t\t\tbreak;\r\n\t\tcase 'trackback_title':\r\n\t\t\t$celldata .= construct_link_code(htmlspecialchars_uni($log[\"$sqlfield\"]), \"../blog.php?\" . $vbulletin->session->vars['sessionurl'] . \"b=$log[id2]#trackback$log[id5]\", true);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\t$handled = false;\r\n\t}\r\n}\r\n", 
  "admin_permissions_form": "\r\n\t\t\t\tprint_yes_no_row($vbphrase[\"can_administer_angular_advertisements\"], \"canadminangularadver\", $user['canadminangularadver']);\r\n\t\t\t\r\nprint_yes_no_row($vbphrase['can_administer_blog'], \"blogpermissions[1]\", ($user['blogpermissions'] & 1 ? 1 : 0));\r\nprint_yes_no_row($vbphrase['can_administer_blog_permissions'], \"blogpermissions[2]\", ($user['blogpermissions'] & 2 ? 1 : 0));\r\n", 
  "useradmin_merge": "require_once(DIR . '/includes/blog_plugin_usermerge.php');\r\n", 
  "admin_moderator_form": "print_description_row($vbphrase['vbseo_options'], false, 2, 'thead');\r\n   \tprint_yes_no_row($vbphrase['vbseo_can_moderate_linkbacks'], 'modperms[vbseo_linkbacks]', $moderator['vbseo_linkbacks']);\r\n", 
  "admin_humanverify_intro_start": "\r\n\t\t\t$funcaptcha_vars = array(\"funcaptcha_theme\", \"funcaptcha_security\", \"funcaptcha_publickey\", \"funcaptcha_privatekey\", \"funcaptcha_lightbox\", \"funcaptcha_proxy\", \"funcaptcha_jsfallback\");\r\n\t\t\tforeach ($funcaptcha_vars AS $funcaptcha_var) {\r\n\t\t\t\tarray_push($getsettings, $funcaptcha_var);\r\n\t\t\t\tarray_push($varnames, \"setting_\" . $funcaptcha_var . \"_title\");\r\n\t\t\t\tarray_push($varnames, \"setting_\" . $funcaptcha_var . \"_desc\");\r\n\t\t\t}\r\n\r\n\t\t\t$res = $db->query(\"SELECT 1 FROM \" . TABLE_PREFIX . \"setting\r\nWHERE varname = 'hv_type' AND optioncode LIKE '%FunCaptcha%'\");\r\n\r\n\t\t\tif ($db->num_rows($res))\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\t$db->query(\"\r\n\t\t    UPDATE \" . TABLE_PREFIX . \"setting set optioncode = 'radio:piped\r\n0|disabled\r\nImage|image_verification\r\nQuestion|question_verification\r\nRecaptcha|recaptcha\r\nFunCaptcha|FunCaptcha' where varname='hv_type'\r\n\t\t\");\r\n\t\t$db->query(\"\r\n\t\t    UPDATE \" . TABLE_PREFIX . \"phrase set text = '<div>Choose the verification type that you wish to present to the user.</div>\r\n\r\n\t\t\t<div style=\\\"font-weight:bold; margin-top:1em\\\">Image Verification</div>\r\n\t\t\t<div>An image consisting of letters in varying fonts/shapes/sizes will be shown to the user. The appearance of this image is dictated by several options that you may control.</div>\r\n\r\n\t\t\t<div style=\\\"font-weight:bold; margin-top:1em\\\">Question and Answer Verification</div>\r\n\t\t\t<div>Questions provided by you that must be answered appropriately for verification.</div>\r\n\r\n\t\t\t<div style=\\\"font-weight:bold; margin-top:1em\\\"><a href=\\\"http://recaptcha.net\\\" target=\\\"_blank\\\">reCAPTCHA&trade;</a> Verification</div>\r\n\t\t\t<div>An image containing two words will be shown to the user. This verification supports audio, allowing blind users to register.</div>\r\n\r\n\t\t\t<div style=\\\"font-weight:bold; margin-top:1em\\\"><a href=\\\"http://www.funcaptcha.co\\\" target=\\\"_blank\\\">FunCaptcha</a></div>\r\n\t\t\t<div>CAPTCHA stops spam with a fun, easy game.</div>' where varname='setting_hv_type_desc'\r\n\t\t\");\r\n", 
  "admin_options_processing_censorcode": "$vbulletin->db->query_write(\"TRUNCATE TABLE \" . TABLE_PREFIX . \"blog_custom_block_parsed\");\r\n", 
  "admin_usergroup_save_complete": "require_once(DIR . '/includes/blog_functions.php');\r\nrequire_once(DIR . '/includes/blog_adminfunctions.php');\r\n\r\nbuild_category_permissions();\r\n", 
  "admin_usergroup_kill": "require_once(DIR . '/includes/blog_functions.php');\r\nrequire_once(DIR . '/includes/blog_adminfunctions.php');\r\n\r\nbuild_category_permissions();\r\n", 
  "useradmin_update_choose": "require_once(DIR . '/includes/blog_plugin_useradmin.php');\r\n", 
  "admin_modlogviewer_query_loop": "if ($log['product'] == 'vbblog')\r\n{\r\n\tunset($log['post_title'], $log['thread_title'], $log['poll_question'], $log['forum_title'], $log['attachment_title']);\r\n\tif ($log['blogentry_title'] == '' AND $log['threadtitle'] != '')\r\n\t{\r\n\t\t$log['blogentry_title'] =& $log['threadtitle'];\r\n\t}\r\n}\r\nelse\r\n{\r\n\tunset($log['blog_title'], $log['blogentry_title'], $log['comment_title'], $log['blogattachment_title']);\r\n}\r\n", 
  "admin_global": "\r\n\t\t\t\tfunction can_administer_angadver()\r\n\t\t\t\t{\r\n\t\t\t\t\tglobal $db, $vbulletin;\r\n\t\t\t\t\t\r\n\t\t\t\t\t$adminangularadvertisements = $db->query_first(\"SELECT canadminangularadver FROM \" . TABLE_PREFIX . \"administrator WHERE userid = \" . $vbulletin->userinfo['userid']);\r\n\t\t\t\t\treturn (($vbulletin->userinfo['usergroupid'] == 6 || $adminangularadvertisements['canadminangularadver']) ? true : false); \r\n\t\t\t\t}\r\n\t\t\t\r\n\r\n$vbp_helper_hook='admin_global';\r\ninclude DIR.'/includes/vbp_helper.php';\r\n\t\t\t\r\n\t\t\t\r\n", 
  "mod_global": "\r\n\t\t\t\t$vbppt_lasthook='mod_global';\r\n\t\t\t\tinclude(DIR.'/includes/vbppt_hooks.php');\r\n\t\t\t\r\n\t\t\t\r\n", 
  "admin_humanverify_intro_output": "\r\n\t\t\tif ($vbulletin->options['hv_type'] !== 'FunCaptcha')\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tprint_form_header('verify', 'updateoptions');\r\n            print_table_header('FunCaptcha Options');\r\n            foreach($cache AS $setting)\r\n            {\r\n                if (preg_match('#^funcaptcha_#si', $setting['varname']))\r\n                {\r\n                    print_setting_row($setting, $settingphrase);\r\n                }\r\n            }\r\n            print_submit_row($vbphrase['save']);\r\n            echo '<div class=\"fc-frame\" style=\"margin-left: auto;margin-right: auto;background: white;width: 89%;margin-top: 20px;border: ridge 4px;text-align: center;\"><h3>FunCaptcha Registration</h3><p>You can register for your public and private keys below or at our <a href=\"http://www.funcaptcha.co/\" target=\"_blank\">website</a>.</p><iframe id=\"reg-fc\" src=\"https://www.funcaptcha.co/wp-fc-register?plugin=vbulletin\" scrolling=\"no\" frameBorder=\"0\" height=\"450px;\" width=\"400px\"></iframe></div>';\r\n\t\t    \r\n", 
  "forumadmin_edit_form": "\r\n\t\tprint_table_header($vbphrase['Cyb_APBOUPC']);\r\n\t\tprint_input_row($vbphrase['forum_accessf_nb'], 'forum[accessf_nb]', $forum['accessf_nb']);\r\n\t\tprint_input_row($vbphrase['forum_accesst_nb'], 'forum[accesst_nb]', $forum['accesst_nb']);\r\n\t\tprint_input_row($vbphrase['forum_create_nb'], 'forum[create_nb]', $forum['create_nb']);\r\n\t\tprint_input_row($vbphrase['forum_reply_nb'], 'forum[reply_nb]', $forum['reply_nb']);\r\n\t\tprint_input_row($vbphrase['attach_nb'], 'forum[attach_nb]', $forum['attach_nb']);\r\n\t\tprint_input_row($vbphrase['linkview_nb'], 'forum[linkview_nb]', $forum['linkview_nb']);\r\n\t\tprint_input_row($vbphrase['linkpost_nb'], 'forum[linkpost_nb]', $forum['linkpost_nb']);\r\nprint_table_header($vbphrase['ada_forum_article']);\r\n\r\nprint_yes_no_row($vbphrase['ada_forum_active'], 'forum[ada_forum]', $forum['ada_forum']);\r\n\r\nprint_select_row($vbphrase['ada_forum_article_style'], 'forum[ada_style]', array($vbphrase['ada_forum_article_style1'], $vbphrase['ada_forum_article_style2'], $vbphrase['ada_forum_article_style3'], $vbphrase['ada_forum_article_style4']), $forum['ada_style']);\r\nprint_table_header($vbphrase['vbseo_permissions']);\r\n   \tprint_yes_no_row($vbphrase['vbseo_enable_likes_system'] , 'forum[vbseo_enable_likes]', isset($forum['vbseo_enable_likes'])?$forum['vbseo_enable_likes']:1);\r\n   \tprint_yes_no_row($vbphrase['vbseo_moderate_pingbacks'] . ' <dfn>(' . $vbphrase['vbseo_require_moderator_validation_before_pingbacks_are_displayed'] . ')</dfn>', 'forum[vbseo_moderatepingbacks]', isset($forum['vbseo_moderatepingbacks'])?$forum['vbseo_moderatepingbacks']:1);\r\n   \tprint_yes_no_row($vbphrase['vbseo_moderate_trackbacks'] . ' <dfn>(' . $vbphrase['vbseo_require_moderator_validation_before_trackbacks_are_displayed'] . ')</dfn>', 'forum[vbseo_moderatetrackbacks]', isset($forum['vbseo_moderatetrackbacks'])?$forum['vbseo_moderatetrackbacks']:1);\r\n   \tprint_yes_no_row($vbphrase['vbseo_moderate_refbacks'] . ' <dfn>(' . $vbphrase['vbseo_require_moderator_validation_before_refbacks_are_displayed'] . ')</dfn>', 'forum[vbseo_moderaterefbacks]', isset($forum['vbseo_moderaterefbacks'])?$forum['vbseo_moderaterefbacks']:1);\r\n", 
  "forumadmin_add_default": "\r\n\t\t$forum['accessf_nb'] = '0';\r\n\t\t$forum['accesst_nb'] = '0';\r\n\t\t$forum['create_nb'] = '0';\r\n\t\t$forum['reply_nb'] = '0';\r\n\t\t$forum['attach_nb'] = '0';\r\n\t\t$forum['linkview_nb'] = '0';\r\n\t\t$forum['linkpost_nb'] = '0';\r\n", 
  "admin_maintenance": "\r\n\t\t\t\tif ($_REQUEST['do'] == 'chooser')\r\n\t\t\t\t{\r\n\t\t\t\t\tprint_form_header('angadver', 'rebuild');\r\n\t\t\t\t\tprint_table_header($vbphrase['rebuild_angular_advertisement_cache']);\r\n\t\t\t\t\tprint_description_row($vbphrase['rebuild_angular_advertisement_cache_desc']);\r\n\t\t\t\t\tprint_submit_row($vbphrase['rebuild_angular_advertisement_cache']);\t\t\t\t\t \r\n\t\t\t\t}\r\n\t\t\t\r\n\r\nif ($vbulletin->options['autotag_enabled_all'])\r\n{\r\n\t\t\t\r\n\tif ($_REQUEST['do'] == 'chooser')\r\n\t{\r\n\t\tprint_form_header('misc', 'autotag_threads_del');\r\n\t\tprint_table_header($vbphrase['autotag_threads_del'], 2, 0);\r\n\t\tprint_description_row($vbphrase['autotag_threads_del_help']);\r\n\t\tprint_input_row($vbphrase['number_of_threads_to_process_per_cycle'], 'perpage', 1000);\r\n\t\tprint_submit_row($vbphrase['autotag_threads_del']);\r\n\t\t\r\n\t\tprint_form_header('misc', 'autotag_threads');\r\n\t\tprint_table_header($vbphrase['autotag_threads'], 2, 0);\r\n\t\tprint_description_row($vbphrase['autotag_threads_help']);\r\n\t\tprint_input_row($vbphrase['number_of_threads_to_process_per_cycle'], 'perpage', 1000);\r\n\t\tprint_yes_row($vbphrase['autotag_threads_del'], 'deletetags', $vbphrase['yes'], false);\r\n\t\tprint_submit_row($vbphrase['autotag_threads']);\r\n\t\r\n\t}\r\n\t\r\n\tif ($_REQUEST['do'] == 'autotag_threads_del')\r\n\t{\r\n\t\trequire_once(DIR . '/includes/functions_autotagger.php'); \r\n\t\trequire_once(DIR . '/includes/functions_newpost.php'); \r\n\t\t\r\n\t\tif (empty($vbulletin->GPC['perpage']))\r\n\t\t{\r\n\t\t\t$vbulletin->GPC['perpage'] = 1000;\r\n\t\t}\r\n\t\r\n\t\t$finishat = $vbulletin->GPC['startat'] + $vbulletin->GPC['perpage'];\r\n\t\r\n\t\techo '<p>' . $vbphrase['autotag_threads_del'] . '</p>';\r\n\t\t\r\n\t\t\r\n\t\r\n\t\t$threads = $vbulletin->db->query_read_slave(\"SELECT \r\n\t\t\tt.threadid\r\n\t\t\tFROM \" . TABLE_PREFIX . \"thread as t\r\n\t\t\tWHERE t.threadid >= \" . $vbulletin->GPC['startat'] . \" AND t.threadid < $finishat\r\n\t\t\tORDER BY t.threadid\r\n\t\t\t\"); \r\n\r\n\r\n\t\twhile ($thread = $vbulletin->db->fetch_array($threads))\r\n\t\t{\r\n\t\t\techo construct_phrase($vbphrase['processing_x'], $thread['threadid']) . \"<br />\\n\";\r\n\t\t\tvbflush();\r\n\t\t\t\r\n\t\t\tDeleteThreadTags($thread);\r\n\t\t\t\r\n\t\t\trebuild_thread_taglist($thread['threadid']); \r\n\t\t\t$finishat = ($thread['threadid'] > $finishat ? $thread['threadid'] : $finishat);\r\n\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t$finishat++; \r\n\t\tif ($checkmore = $vbulletin->db->query_first(\"SELECT threadid FROM \" . TABLE_PREFIX . \"thread WHERE threadid >= $finishat LIMIT 1\"))\r\n\t\t{\r\n\t\t\tprint_cp_redirect(\"misc.php?\" . $vbulletin->session->vars['sessionurl'] . \"do=autotag_threads_del&startat=$finishat&pp=\" . $vbulletin->GPC['perpage']);\r\n\t\t\techo \"<p><a href=\\\"misc.php?\" . $vbulletin->session->vars['sessionurl'] . \"do=autotag_threads_del&amp;startat=$finishat&amp;pp=\" . $vbulletin->GPC['perpage'] . \"\\\">\" . $vbphrase['click_here_to_continue_processing'] . \"</a></p>\";\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tdefine('CP_REDIRECT', 'misc.php');\r\n\t\tprint_stop_message('updated_threads_successfully');\r\n\t}\r\n\t\r\n\tif ($_REQUEST['do'] == 'autotag_threads')\r\n\t{\r\n\t\trequire_once(DIR . '/includes/functions_autotagger.php'); \r\n\t\trequire_once(DIR . '/includes/functions_newpost.php'); \r\n\t\t\r\n\t\tif (empty($vbulletin->GPC['perpage']))\r\n\t\t{\r\n\t\t\t$vbulletin->GPC['perpage'] = 1000;\r\n\t\t}\r\n\t\r\n\t\t$finishat = $vbulletin->GPC['startat'] + $vbulletin->GPC['perpage'];\r\n\t\r\n\t\techo '<p>' . $vbphrase['autotag_threads'] . '</p>';\r\n\t\r\n\t\r\n\t\tif ($_REQUEST['deletetags'])\r\n\t\t{\r\n\t\t\techo '<p>' . $vbphrase['autotag_threads_del'] . '</p>';\r\n\t\t\t$vbulletin->db->query_write(\"DELETE FROM \" . TABLE_PREFIX . \"tag WHERE autotag=1\");\r\n\t\t\t$vbulletin->db->query_write(\"DELETE FROM \" . TABLE_PREFIX . \"tagthread WHERE autotag=1\");\r\n\t\t}\t\r\n\t\r\n\t\t$threads = $vbulletin->db->query_read_slave(\"SELECT \r\n\t\t\tt.taglist,\r\n\t\t\tt.dateline,\r\n\t\t\tt.forumid,\r\n\t\t\tt.postuserid,\r\n\t\t\tt.title,\r\n\t\t\tt.threadid,\r\n\t\t\tt.prefixid\r\n\t\t\tFROM \" . TABLE_PREFIX . \"thread as t\r\n\t\t\tWHERE t.threadid >= \" . $vbulletin->GPC['startat'] . \" AND t.threadid < $finishat\r\n\t\t\tORDER BY t.threadid\r\n\t\t\t\"); \r\n\t\t\r\n\t\t\r\n\t\twhile ($thread = $vbulletin->db->fetch_array($threads))\r\n\t\t{\r\n\t\t\techo construct_phrase($vbphrase['processing_x'], $thread['threadid']) . \"<br />\\n\";\r\n\t\t\tvbflush();\r\n\t\t\t\r\n\t\t\tProcessThread($thread);\r\n\t\t\t\r\n\t\t\t$finishat = ($thread['threadid'] > $finishat ? $thread['threadid'] : $finishat);\r\n\t\r\n\t\t}\r\n\t\r\n\t\t$finishat++; \r\n\t\tif ($checkmore = $vbulletin->db->query_first(\"SELECT threadid FROM \" . TABLE_PREFIX . \"thread WHERE threadid >= $finishat LIMIT 1\"))\r\n\t\t{\r\n\t\t\tprint_cp_redirect(\"misc.php?\" . $vbulletin->session->vars['sessionurl'] . \"do=autotag_threads&startat=$finishat&pp=\" . $vbulletin->GPC['perpage']);\r\n\t\t\techo \"<p><a href=\\\"misc.php?\" . $vbulletin->session->vars['sessionurl'] . \"do=autotag_threads&amp;startat=$finishat&amp;pp=\" . $vbulletin->GPC['perpage'] . \"\\\">\" . $vbphrase['click_here_to_continue_processing'] . \"</a></p>\";\r\n\t\t}\r\n\t\t\r\n\t\tdefine('CP_REDIRECT', 'misc.php');\r\n\t\tprint_stop_message('updated_threads_successfully');\r\n\t}\r\n}\r\n\r\n\r\n", 
  "admin_modlogviewer_query": "// if unserialize(moderatorlog.action) contains 'blog' = 1 then this record is a blog action\r\n// moderatorlog.id1 corresponds to the owner of the blog (userid)\r\n// moderatorlog.id2 corresponds to the blog entry (blogid)\r\n// moderatorlog.id3 corresponds to a comment (blogtextid)\r\n// moderatorlog.id4 corresponds to an attachment (attachmentid)\r\n// moderatorlog.id5 corresponds to a trackback (blogtrackbackid)\r\n\r\n$blogprincids = array(\r\n\t'blog_title'           => $vbphrase['blog'],\r\n\t'blogentry_title'      => $vbphrase['blog_entry'],\r\n\t'comment_title'        => $vbphrase['comment'],\r\n\t'blogattachment_title' => $vbphrase['attachment'],\r\n\t'trackback_title'      => $vbphrase['trackback'],\r\n);\r\n\r\n$princids = array_merge($princids, $blogprincids);\r\n\r\n$hook_query_fields .=\t\"\r\n\t,IF(blog_user.title <> '', blog_user.title, user2.username) AS blog_title,\r\n\tblog.title AS blogentry_title, blog_text.title AS comment_title, blog_attachment.filename AS blogattachment_title, blog_trackback.title AS trackback_title\r\n\";\r\n\r\n$hook_join_fields .= \"\r\n\tLEFT JOIN \" . TABLE_PREFIX . \"user AS user2 ON (user2.userid = moderatorlog.id1)\r\n\tLEFT JOIN \" . TABLE_PREFIX . \"blog_user AS blog_user ON (blog_user.bloguserid = moderatorlog.id1)\r\n\tLEFT JOIN \" . TABLE_PREFIX . \"blog AS blog ON (blog.blogid = moderatorlog.id2)\r\n\tLEFT JOIN \" . TABLE_PREFIX . \"blog_text AS blog_text ON (blog_text.blogtextid = moderatorlog.id3)\r\n\tLEFT JOIN \" . TABLE_PREFIX . \"blog_attachment AS blog_attachment ON (blog_attachment.attachmentid = moderatorlog.id4)\r\n\tLEFT JOIN \" . TABLE_PREFIX . \"blog_trackback AS blog_trackback ON (blog_trackback.blogtrackbackid = moderatorlog.id5)\r\n\";\r\n", 
  "useradmin_update_save": "if ($userinfo['userid'])\r\n{\r\n\t$userdata->pre_save();\r\n\tif (empty($userdata->errors))\r\n\t{\r\n\t\t$vbulletin->input->clean_array_gpc('p', array(\r\n\t\t\t'blog' => TYPE_ARRAY\r\n\t\t));\r\n\r\n\t\t$blogman =& datamanager_init('Blog_User', $vbulletin, ERRTYPE_CP);\r\n\r\n\t\tif ($bloguserinfo = $db->query_first(\"\r\n\t\t\tSELECT bloguserid\r\n\t\t\tFROM \" . TABLE_PREFIX . \"blog_user\r\n\t\t\tWHERE bloguserid = $userinfo[userid]\r\n\t\t\"))\r\n\t\t{\r\n\t\t\t$blogman->set_existing($bloguserinfo);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$blogman->set('bloguserid', $userinfo['userid']);\r\n\t\t}\r\n\r\n\t\t$blogman->set('description', $vbulletin->GPC['blog']['description']);\r\n\t\t$blogman->set('title', $vbulletin->GPC['blog']['title']);\r\n\r\n\t\tif ($vbulletin->GPC['blog']['akismet_key'] AND empty($vbulletin->options['vb_antispam_key']))\r\n\t\t{\r\n\t\t\t$blogman->set('akismet_key', $vbulletin->GPC['blog']['akismet_key']);\r\n\t\t}\r\n\r\n\t\t// options bitfield\r\n\t\tforeach ($vbulletin->bf_misc_vbbloguseroptions AS $key => $val)\r\n\t\t{\r\n\t\t\t$value = intval($vbulletin->GPC['blog']['options'][\"$key\"]);\r\n\t\t\t$blogman->set_bitfield('options', $key, $value);\r\n\t\t}\r\n\r\n\t\t$insert = false;\r\n\t\t// options bitfield\r\n\t\tforeach ($vbulletin->bf_misc_vbblogsocnetoptions AS $key => $val)\r\n\t\t{\r\n\t\t\t$blogman->set_bitfield('options_member', $key, intval($vbulletin->GPC['blog']['options_member'][\"$key\"]));\r\n\t\t\t$blogman->set_bitfield('options_guest', $key, intval($vbulletin->GPC['blog']['options_guest'][\"$key\"]));\r\n\t\t\t$blogman->set_bitfield('options_buddy', $key, intval($vbulletin->GPC['blog']['options_buddy'][\"$key\"]));\r\n\t\t\t$blogman->set_bitfield('options_ignore', $key, intval($vbulletin->GPC['blog']['options_ignore'][\"$key\"]));\r\n\r\n\t\t\tif (\r\n\t\t\t\t!intval($vbulletin->GPC['blog']['options_member'][\"$key\"])\r\n\t\t\t\t\tOR\r\n\t\t\t\t!intval($vbulletin->GPC['blog']['options_guest'][\"$key\"])\r\n\t\t\t\t\tOR\r\n\t\t\t\t!intval($vbulletin->GPC['blog']['options_buddy'][\"$key\"])\r\n\t\t\t\t\tOR\r\n\t\t\t\tintval($vbulletin->GPC['blog']['options_ignore'][\"$key\"]))\r\n\t\t\t{\r\n\t\t\t\t$insert = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$blogman->set('subscribeown', $vbulletin->GPC['blog']['subscribeown']);\r\n\t\t$blogman->set('subscribeothers', $vbulletin->GPC['blog']['subscribeothers']);\r\n\r\n\t\t// Don't insert a blog_user record if the user doesn't have one and none of this stuff was changed from the \"default\" value\r\n\t\tif (\r\n\t\t\t$bloguserinfo\r\n\t\t\t\tOR\r\n\t\t\t$vbulletin->GPC['description']\r\n\t\t\t\tOR\r\n\t\t\t$vbulletin->GPC['title']\r\n\t\t\t\tOR\r\n\t\t\t(\r\n\t\t\t\t$vbulletin->GPC['blog']['akismet_key']\r\n\t\t\t\t\tAND\r\n\t\t\t\tempty($vbulletin->options['vb_antispam_key'])\r\n\t\t\t)\r\n\t\t\t\tOR\r\n\t\t\t$vbulletin->GPC['blog']['subscribeown'] != 'none'\r\n\t\t\t\tOR\r\n\t\t\t$vbulletin->GPC['blog']['subscribeothers'] != 'none'\r\n\t\t\t\tOR\r\n\t\t\t!$vbulletin->GPC['blog']['options']['allowcomments']\r\n\t\t\t\tOR\r\n\t\t\t!$vbulletin->GPC['blog']['options']['allowpingback']\r\n\t\t\t\tOR\r\n\t\t\t$vbulletin->GPC['blog']['options']['moderatecomments']\r\n\t\t\t\tOR\r\n\t\t\t$insert\r\n\t\t)\r\n\t\t{\r\n\t\t\t$blogman->save();\r\n\t\t}\r\n\t}\r\n}\r\n", 
  "useradmin_edit_column1": "define('BLOG_ADMIN_USER_EDIT', true);\r\nrequire_once(DIR . '/includes/blog_plugin_useradmin.php');\r\n", 
  "admin_cache_bbcode": "$vbulletin->db->query_write(\"TRUNCATE TABLE \" . TABLE_PREFIX . \"blog_custom_block_parsed\");\r\n", 
  "stylevar_edit_sizes": "print_stylevar_row($vbphrase['blog_form_width'], 'formwidth_blog');\r\nprint_stylevar_row($vbphrase['blog_code_block_width'], 'codeblockwidth_blog');\r\nprint_stylevar_row($vbphrase['message_width_blog'], 'messagewidth_blog');\r\n", 
  "admin_cache_smilies": "$vbulletin->db->query_write(\"TRUNCATE TABLE \" . TABLE_PREFIX . \"blog_custom_block_parsed\");\r\n", 
  "forumadmin_update_save": "if(defined('VBSEO_ENABLED'))\r\nvbseo_complete_sec('forumadmin_update_save');\r\n", 
  "admin_options_processing_build": "\r\n\t\t\tif ($oldsetting['varname'] == 'angadver_uploadpath')\r\n\t\t\t{\r\n\t\t\t\tif (!file_exists(DIR . '/' . $newvalue))\r\n\t\t\t\t{\r\n\t\t\t\t\tprint_stop_message('directory_not_exists', $newvalue);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n"
}